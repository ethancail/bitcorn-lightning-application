services:
  api:
    build: ./app/api
    volumes:
      - ${APP_DATA_DIR:-./data}:/data
      - ./scripts:/scripts:ro
      - ${APP_LIGHTNING_NODE_DATA_DIR:-/home/umbrel/umbrel/app-data/lightning/data/lnd}:/lnd:ro
    environment:
      BITCOIN_NETWORK: mainnet
      LND_GRPC_HOST: 10.21.21.9:10009
    networks:
      - umbrel

  web:
    build: ./app/web
    depends_on:
      - api
    networks:
      - umbrel

networks:
  umbrel:
    external: true
    name: umbrel_main_network
